%% Blackjack Pseudocode

clear
clc

%% Blackjack Intro Words
disp('Hello! Welcome to Blackjack')

%% Player input initialization
% Need inputs, how many player and initial $

numPlayers = input('How many players? ');
for i = 1:numPlayers
    players(i).NAME = input(['Enter name for Player ' num2str(i) ': '], 's');
    players(i).HAND = [];
end
[players(1).HAND, myDeck] = dealCard(myDeck);


% Need larger loop for how long to play
% Initialize player variables

%% Game initialization

function myDeck = initDeck()
  suits = {'Diamonds', 'Hearts', 'Spades', 'Clubs'};
  ranks = {'2', '3', '4', '5', '6', '7', '8', '9', '10', 'J', 'Q', 'K', 'A'};
  index = 1;
  for suitCard = 1:length(suits)
      for rankCard = 1:length(ranks)
          myDeck(index).suitCard = suits{suitCard};
          myDeck(index).rankCard = ranks{rankCard};
          if rankCard <= 9
              myDeck(index).cardValue = rankCard + 1;
          elseif rankCard <= 12
              myDeck(index).cardValue = 10;
          else
              myDeck(index).cardValue = 11;
          end
          index = index + 1;
      end
  end
end

function shuffleDeck = shuffleDeck(myDeck)
  shuffleDeck = myDeck(randperm(length(myDeck)));
end

function [card, myDeck] = dealCard(myDeck)
    card = myDeck(1);
    myDeck(1) = [];
end


myDeck = initDeck();
myDeck = shuffleDeck(myDeck);

[players(1).HAND, myDeck] = dealCard(myDeck);
[dealerCard, myDeck] = dealCard(myDeck);

disp([players(1).NAME ' got: ' players(1).HAND.rankCard ' of ' players(1).HAND.suitCard])
disp(['Dealer got: ' dealerCard.rankCard ' of ' dealerCard.suitCard])



%% Main loop
deck=shuffleDeck(myDeck);
while(number of players>0 or players decide to end)

% take initial bets

%Shuffle deck
function shuffledDeck=shuffleDeck(myDeck);

% create loop for dealing cards
% display information in command window, needs to be for players and dealer
% runs once for each player and gives each player an empty hand-NO CARDS YET
for i=1:numPlayers
  players(i).hand=[];
end

% Dealing with first two cards
for i=1:numPlayers
  [players(i),deck]=dealCard(players(i),deck);
  [players(i),deck]=dealCard(players(i),deck);
% For two times because Blackjack starts with two cards
% dealCard means
player.Hand(i+1)=deck(i);
deck(i)=[];

% hit/stand logic, use functions from below

end

for i=1:numPlayers
  disp(['Player',num2str(i),'turn']);
% logic check
  players(i)=play(players(i),deck,i==1);

%% my local functions
function shuffledDeck=shuffleDeck(myDeck)
% use randperm to suffle deck, numbers 1:52
%return shuffled Deck
end

function myDeck=initDeck()
%create a loop for each suit
% Should my deck be: array, tables, structures
% Align card values, suits
end

function [updatedPlayer,updatedDeck]=dealCards(shuffledDeck, player)
% think about player variable
% update player hand, calculate player hand value
% if hand>21 and contains an Ace -> make the Ace Value=1
% use the evaluate Hand function here
% update shuffledDeck to remove cards delt shuffledDeck(1)=[];
end

function [player,handValue]=evaluateHand(player, dealerHand)
% need logic to determine if player wins against dealer
end

function updatedDealer=dealerLogic(dealerHand)
% need logic here to determine if the dealer should hit or stand
% while loop, dealer hand<17 dealer needs to hit
end

